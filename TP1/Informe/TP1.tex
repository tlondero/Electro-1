\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[spanish, es-tabla]{babel}
\usepackage[table,xcdraw]{xcolor}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\usepackage{float}
\usepackage{graphicx}

\usepackage{caption}
\usepackage{subcaption}
\captionsetup{compatibility=false}

\usepackage{multirow}
\setlength{\doublerulesep}{\arrayrulewidth}

\newcommand{\quotes}[1]{``#1''}
\newcommand\underrel[2]{\mathrel{\mathop{#2}\limits_{#1}}}

\usepackage{array}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\usepackage[american]{circuitikz}
\usepackage{xcolor}
\usepackage{fancyhdr}

\newlength{\stockheight}
\usepackage{hyperref}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
    citecolor=blue,    
}

\urlstyle{same}

\usepackage{units} 
\pagestyle{fancy}
\fancyhf{}
\lhead{22.11 Electrónica I}
\rhead{Mechoulam, Lambertucci, Rodriguez, Londero}
\rfoot{Página \thepage}



\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%								CARATULA								%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\input{Caratula.tex}

\tableofcontents
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%								INFORME									%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introducción}
La configuración a estudiar en este informe será la configuración de \textbf{Bootstrap}. El bootstraping es una técnica usada para aumentar al impedancia de entrada y bajar la de salida, utilizando un capacitor para realimentar el emisor del transistor con su respectiva base. El circuito propuesto es un colector común utilizando el capacitor $C_2$ para la realimentación:

\begin{figure}[H]
\begin{center}
\begin{circuitikz}[european voltages]
	\node [npn](Q){};
	\draw (Q.B) to[short, -*] ++(-3,0) node[](v1){};
	\draw (v1) to[C, l = $C_1$] ++(-1.5,0) to[R, l = $R_S$] ++(-1.5,0) to[short] ++(-0.5,0) node[ocirc,label=left:$V_{S}$]{};
	\draw (v1) to[short] ++(0,-0.5) to[R, l = $R_3$] ++(0,-1.5) to[short, -*] ++(1.5,0) node[](v2){} to[C, l = $C_2$] ++(2.35,0) to[short] ++(0.5,0) to[C, l = $C_3$] ++(1.5,0) node[](aux){};
	\draw (aux) to[open] ++(0,-2.1) node[ground]{} to[R, l= $R_L$, v= $V_o$] (aux);
	\draw (v2) to[short] ++(0,-0.5) to[R, l = $R_2$] ++(0,-1.5) node[ground]{};
	\draw (Q.E) to[short, -*] ++(0,-1.23) to[short] ++(0,-0.5) to[R, l = $R_e$] ++(0,-1.5) node[ground]{};
	\draw (Q.C) to[short] ++(0,2) node[ocirc,label=right:$V_{cc}$]{};
	\draw (v2) to[short] ++(0,2.5) to[R, l = $R_1$] ++(0,1.5) to[short, -*] ++(2.35,0);
\end{circuitikz}
\caption{Circuito Bootstrap propuesto.}
\label{fig:boot}
\end{center}
\end{figure}

\section{Desarrollo}

\subsection{Polarización}
El primer paso consiste en pasivar la fuente Vs y tratar los capacitores como un circuito abierto. Redibujando y utilizando el teorema de Thevenin se llega a las siguientes condiciones:
\begin{figure}[H]
\begin{center}
\begin{circuitikz}[european voltages]
	\node [npn](Q){};
	\draw (Q.B) to[R, l = $R_{Th}$] ++(-1.5,0) to[short] ++(-0.5,0) node[ocirc,label=left:$V_{Th}$]{};
	\draw (Q.E) to[R, l = $R_e$] ++(0,-1.5) node[ground]{};
	\draw (Q.C) to[short] ++(0,0.5) node[ocirc,label=right:$V_{cc}$]{};
\end{circuitikz}
	\caption{Circuito Bootstrap Polarización.}
	\label{fig:pol}
\end{center}
\end{figure}

donde:

\begin{equation*}
\left\{
\begin{aligned}
		& V_{Th}= V_{cc}\cdot \frac{R_2}{R_1+R_2} \\
		& R_{Th}= (R_1 // R_2) + R_3 
\end{aligned}
\right.
\end{equation*}

Recorriendo la malla de entrada se obtienen la siguientes ecuaciones:
\begin{equation*}
	V_{Th}-I_b \cdot R_{Th} -V_{BE_{On}}-I_e \cdot R_E=0 \ \ I_c \approx I_e  \ \  I_b\approx  \beta \cdot I_e 
\end{equation*}

Es así que se consigue una expresión para $I_C$ con $V_{ce}$:
\begin{equation*}
	I_{C}\approx \frac{V_{Th}-V_{BE_{On}}}{\frac{R_{Th}}{1+\beta}+R_E} \ \ V_{ce} = V_{cc}-I_c\cdot R_E
\end{equation*}

\subsection{Modelo Incremental}
Para el modelo incremental se utilizarán los siguientes estimadores:
\begin{equation*}
\left\{
\begin{aligned}
	& \hat{hfe}=\beta \\
	& \hat{hie} = \frac{V_T}{I_b} \\
	& \hat{\frac{1}{hoe}} = \frac{V_a}{I_c}
\end{aligned}
\right.
\end{equation*}

Siendo este el circuito correspondiente al modelo:
\begin{figure}[H]
\begin{center}
\begin{circuitikz}[european voltages]
	\node [ocirc,label=left:$B$](b){};
	\draw (b) to[short, f_= $I_B$] ++(1.5,0) to[R, l = $hie$] ++(0,-2) node[circ](e){} to[short] ++(-1.5,0) node[ocirc, label=left:$E$](){};
	\draw (e) to[short, -*] ++(2,0) to[open] ++(0,2) node[](aux){} to[dcisource, l = $hfe \cdot I_B$] ++(0,-2) to[short, -*] ++(2.5,0) to[open] ++(0,2) to[R, l= $\frac{1}{hoe}$] ++(0,-2) to[short]++(1.5,0) node[ocirc, label=right:$E$](){};
	\draw (aux) to[short] ++(4,0) node[ocirc, label=right:$C$](){};
\end{circuitikz}
	\caption{Modelo incremental.}
	\label{fig:modinc}
\end{center}
\end{figure}

Al transistor fírisco utilizado en el circuito se le midió el HFE, siendo este $HFE \approx 380$
\subsection{Circuito Incremental}
Reemplazando el transistor por su modelo incremental, asumiendo que se trabaja con pequeñas señales a frecuencias medias, los capacitores son tomados como cortocircuitos dado a que representan una baja impedancia a estas frecuencias, se obtiene el siguiente circuito:
\begin{figure}[H]
\begin{center}
\begin{circuitikz}[european voltages]
	\node [ocirc,label=left:$V_i$](vi){};
	\draw (vi) to[short] ++(0.5,0) to[R, l = $R_S$] ++(2,0) node[circ](v1){} to[R, l = $R_3$] ++(2,0) node[circ](v2){};
	\draw (v1) to[short] ++(0,1) to[R, l = $hie$] ++(2,0) to[short] ++(0,-1);
	\draw (v2) to[open] ++(0,-2) node[ground](gnd){} to[dcisource, l = $hfe \cdot I_B$] ++(0,2);
	\draw (v2) to[short, -*] ++(1.5,0) to[R, l= $\frac{1}{hoe}$] ++(0,-2) node[ground](){};
	
	\draw (v2) to[short, -*] ++(3,0) to[R, l= $R_1$] ++(0,-2) node[ground](){};
	\draw (v2) to[short, -*] ++(4.5,0) to[R, l= $R_2$] ++(0,-2) node[ground](){};
	\draw (v2) to[short, -*] ++(6,0) to[R, l= $R_E$] ++(0,-2) node[ground](){};
	\draw (v2) to[short, -*] ++(8,0) to[open] ++(0,-2) node[ground](){} to[R, l= $R_L$, v = $V_o$] ++(0,2);
\end{circuitikz}
	\caption{Circuito incremental.}
	\label{fig:circinc}
\end{center}
\end{figure}

Redibujando convenientemente y utilizado el pasaje a nivel de corriente, se puede describir el circuito como:
\begin{figure}[H]
\begin{center}
\begin{circuitikz}[european voltages]
	\node [ocirc,label=left:$V_i$](vi){};
	\draw (vi) to[short] ++(0.5,0) to[R, l = $R_S + \left( R_3 // hie \right)$] ++(2,0) to[open] ++(0,-2) node[ground](){} to[R, l= $R_{d}$, v = $V_o$] ++(0,2);
\end{circuitikz}
	\caption{Circuito incremental final.}
	\label{fig:circinc2}
\end{center}
\end{figure}
siendo
\begin{equation*}
	R_d = \frac{1}{hoe} // R_1 // R_2 // R_E // R_L \cdot \left(1 + \frac{R_3 hfe}{R_3 + hfe}\right) 
\end{equation*}

Una pequeña modificación que se hace a la expresión del circuito es definir un $hfe$ y un $hie$ efectivo. Para el circuito dado, estos son:
\begin{equation*}
\left\{
\begin{aligned}
	& hfe^* = hfe\cdot \frac{R_3}{R_3+hie} \\
	& hie^* = R_3 // hie
\end{aligned}
\right.
\end{equation*}

\subsection{Elección de componentes.}

Lo primero fue definir una tensión de alimentación vcc=10V, a partir de esta tensión se eligió un punto de operación \textbf{Q} tal que el transistor se encuentre en modo activo directo,  la tensión  colector-emisor será de $V_{ce} = 5 V$,mientras que la corriente de colector $I_{cq} = 2 \ mA$.  A partir de la elección de Vcc se obtuvieron valroes de resistencia que cumplan dicho punto de polarización, recorriedo la malla de entrada y salida para determinarlos. Es así que se llegó a los siguientes valores: $R_1 = 10 \ k\Omega$, $R_2 = 14.7 \ k\Omega$, $R_3 = 1 \ k\Omega$ y $R_E = 2.2 \ k\Omega$.

Por otro lado, se tomó como resistencia del generador $R_s \approx 50 \ \Omega$, mientras que para la carga se consideró $R_L \approx 10 \ k\Omega$. Para los capacitores, sus valores nominales fueron elegidos tal que su impedancia sea despreciable frente a las resistencias frente a frecuencias medias.
\subsection{Resultados de interés.}
Se realiza un enfoque en la ganancia de tensión, corriente, impedancia de entrada y de salida, siendo estos presentados a continuación:

\begin{equation}
	\Delta V \triangleq \frac{V_o}{V_i} = \frac{ \left(\frac{1}{hoe} // R_1 // R_2 // R_E // R_L  \right)\cdot (1+hfe^*)}{R_s + hie^* + \left(\frac{1}{hoe} // R_1 // R_2 // R_E // R_L  \right)\cdot (1+hfe*) } 
\end{equation}
\begin{equation}
	\Delta I \triangleq \frac{I_o}{I_i} =  \frac{\frac{1}{hoe} // R_1 // R_2 // R_E}{(\frac{1}{hoe} // R_1 // R_2 // R_E)+R_L} \cdot (1+hfe^*)
\end{equation}
\begin{equation}
	Z_{In} = R_s + hie^* + \left(\frac{1}{hoe} // R_1 // R_2 // R_E // R_L  \right)\cdot (1+hfe^*)
\end{equation}
\begin{equation}
	Z_{Out} = (R_s + hie^*) //  \left(\frac{1}{hoe} // R_1 // R_2 // R_E // R_L  \right)\cdot (1+hfe^*)
\end{equation}

Luego se graficó la ganancia de tensión en función de la frecuencia:
\begin{figure} [H]
	\centering
	\includegraphics[width=\textwidth]{imagenes/avs.png}
	\caption{Transferencia Módulo.}
	\label{fig:transmod}
\end{figure}

Una cualidad a notar es que esta configuración tiene una ganancia de tensión menor a 1 y que, para el rango de frecuencias utilizadas, el circuito se comporta como un pasa-altos, si bien realmente, al continuar aumentando la frecuencia, eventualmente decaerá en un pasa-banda. Algunas posibles aplicaciones para el circuito son las de seguidor de tensión\footnote{El circuito también es conocido como ``Seguidor por Emisor''} o como amplificador de corriente.
\begin{figure} [H]
	\centering
	\includegraphics[width=\textwidth]{imagenes/avsp.png}
	\caption{Transferencia Fase.}
	\label{fig:transph}
\end{figure}

Otro aspecto de interés se puede ver en la fase, dado a que el circuito no invierte a esta.

\begin{center}
	\textcolor{red}{\textbf{GUIDO FIJATE QUE TABLA TE GUSTA MÁS, BORRÁ LA OTRA.}}
\end{center}

\begin{table}[H]
\centering
\begin{tabular}{cccc}
\hline                   & $\mathbf{\Delta V_S}$ & $\mathbf{R_{In}}$ & $\mathbf{R_{Out}}$ \\
\hline
\textbf{Simulación} & -0.0783 [db]          & 66 [$k\Omega$]    & 200 [$\Omega$]     \\
\textbf{Calculado}  & -0.01 [db]            & 356 [$k\Omega$]   & 374 [$\Omega$]     \\
\textbf{Medido}     & -0.1 [db]             & 83.4 [$k\Omega$]  & 9860 [$\Omega$]   	\\
\hline
\end{tabular}
\caption{Comparación de valores obtenidos de diversos enfoques.}
\label{tabla:comparacion}
\end{table}

%\begin{table}[H]
%\centering
%\begin{tabular}{c|c|c|c|}
%\cline{2-4}
%                                          & $\mathbf{\Delta V_S}$ & $\mathbf{R_{In}}$ & $\mathbf{R_{Out}}$ \\ \hline
%\multicolumn{1}{|c|}{\textbf{Simulación}} & -0.0783 [db]          & 66 [$k\Omega$]    & 200 [$\Omega$]     \\ \hline
%\multicolumn{1}{|c|}{\textbf{Calculado}}  & -0.01 [db]            & 356 [$k\Omega$]   & 374 [$\Omega$]     \\ \hline
%\multicolumn{1}{|c|}{\textbf{Medido}}     & -0.1 [db]             & 83.4 [$k\Omega$]  & 9860 [$\Omega$]    \\ \hline
%\end{tabular}
%\caption{Comparación de valores obtenidos de diversos enfoques.}
%\label{tabla:comparacion}
%\end{table}

\begin{center}
	\textcolor{red}{\textbf{Preguntar cuentas.}}
\end{center}

\begin{center}
	\textcolor{red}{\textbf{Sé que no sabemos si las cuentas están bien, pero estas conclusiones están como el orto:}}\\
	\textcolor{blue}{\textbf{\textit{Nos dió 15 pero era esperable porque era esperable jaja besooooo xdxdxd lolololol.}}}
\end{center}

Las mediciones realizadas coinciden parcialmente con las simulaciones. Las discrepancias se deben principalmente a los cambios en el HFE. Estas son esperables, pero dado a que la impedancia de entrada es grande y la de salida pequeña, se toman como válidos lo cual es esperable ya que el circuito está basado en un colector común.

\end{document}
